<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 TRANSITIONAL//EN">
<html>
	<head>
		<meta name=Title content=" Squeak Development 2007 Example ">
		<meta name=Keywords content="Squeak, Tutorial, Example">
		<meta name=Author content="Stephan B. Wessels">
		<meta http-equiv=Content-Type content="text/html; charset=utf-8">
		<title>
			Squeak Development Example for Squeak 3.9 (2007)
		</title>
		<style type="text/css" media="all">
			@import "css/tutorial2007.css";
		</style>
	</head>
	<body class="main">
		<div id="main">
			<p class="section">Section 5</p>
			<div id="content">
		<p>
			Here's a new unit test for GridTestCase to exercise our undo mechanism.
		</p>
		<p class="code">
			<b>testUndoStackAfterPush</b><br>
			&nbsp;&nbsp;&nbsp;&nbsp;	| grid |<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	grid := self generateDemoGrid.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	self should: [grid movesStack isEmpty].<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	grid pushCellEastFromLocation: 1@2.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	self should: [grid movesStack size = 1].<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	self should: [grid undo].<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	self shouldnt: [grid undo].
		</p>
		<p>
			Now we work on the GUI.  Our first step is to create the Undo button.
			Add the or modify the following instance methods in the LaserGame class.
		</p>
		<p class="code">
			<b>makeUndoButton</b><br>
			&nbsp;&nbsp;&nbsp;&nbsp;	^self makeButton: 'Undo' action: #undo state: nil
		</p>
		<p class="code">
			<b>addButtonsToPanel: panel</b><br>
			&nbsp;&nbsp;&nbsp;&nbsp;	| layout |<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	layout := self buttonLayoutFrameForRow: 1 column: 1.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	panel addMorph: self makeQuitGameButton fullFrame: layout.<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	layout := self buttonLayoutFrameForRow: 1 column: 2.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	panel addMorph: self makeFireLaserButton fullFrame: layout.<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	layout := self buttonLayoutFrameForRow: 2 column: 1.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	panel addMorph: self makeNewGameButton fullFrame: layout.<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	layout := self buttonLayoutFrameForRow: 2 column: 2.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	panel addMorph: self makeUndoButton fullFrame: layout.<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	^panel
		</p>
		<p class="code">
			<b>undo</b><br>
			&nbsp;&nbsp;&nbsp;&nbsp;	| completed |<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	completed := self grid undo.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;	completed ifTrue: [<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;		self incrementMoves.<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;		self updateGameBoardAndControls]
		</p>
		</div>
<div id="paging">
<a class="index" href="index.html">Index Page</a>
		<a class="forward" href="187.html">Next Page</a>
		<p class="foot">Copyright &copy; 2007, 2008, 2009 Stephan B Wessels&nbsp;&nbsp;&nbsp;&nbsp;<a href="mailto:stevewessels@me.com?subject=squeak tutorial 2007">stevewessels@me.com</a></p>
			</div>
		</div>
	</body>
</html>